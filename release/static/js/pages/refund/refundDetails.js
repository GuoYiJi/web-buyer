global.webpackJsonp([10],{"5h59":function(t,e,s){"use strict";var a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.isFetch?s("div",{staticClass:"wrapper"},[s("div",{staticClass:"refundInfo"},[s("p",{staticClass:"refundState"},[t._v("\n      "+t._s(t.state[t.details.refundType]+","+t.stateName[t.details.state])+"\n    ")]),t._v(" "),t.isFh?s("p",{staticClass:"title"},[t._v("请将商品寄回以下地址并填写物流单号：")]):t._e(),t._v(" "),t.isFh?s("div",{staticClass:"addressBox"},[s("p",{staticClass:"name"},[t._v("收货人："+t._s(t.details.shopAddressName)+" "+t._s(t.details.shopMobile))]),t._v(" "),s("p",{staticClass:"address"},[t._v("收货地址："+t._s(t.details.shopValue)+" "+t._s(t.details.shopAddress))])],1):t._e(),t._v(" "),t.isFh?s("div",{staticClass:"logisticsNumber"},[s("p",{staticClass:"text"},[t._v("物流单号")]),t._v(" "),!t.details.orderLogistics||4!=t.details.state&&6!=t.details.state?t._e():s("p",{staticClass:"num"},[t._v("\n        "+t._s(t.details.orderLogistics.logisticsNo)+"\n      ")]),t._v(" "),3==t.details.state?s("div",{staticClass:"label"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.logisticsNum,expression:"logisticsNum"}],staticClass:"number",attrs:{type:"number",eventid:"0"},domProps:{value:t.logisticsNum},on:{input:function(e){e.target.composing||(t.logisticsNum=e.target.value)}}}),t._v(" "),s("span",{staticClass:"btn",attrs:{eventid:"1"},on:{click:function(e){t.sendNum(t.details.id)}}},[t._v("点击发送")])]):t._e()],1):t._e(),t._v(" "),s("p",{staticClass:"title"},[t._v(t._s(t.state[t.details.refundType])+"信息")]),t._v(" "),s("div",{staticClass:"van-cell van-cell--clickable goods-thumb__list",attrs:{eventid:"2"},on:{click:function(e){t.handleShopListClick(t.goods)}}},[s("div",{staticClass:"van-cell__title"},t._l(t.goods,function(e,a){return a<3?s("span",{key:t.j,staticClass:"goods-thumb-item"},[s("img",{staticClass:"n-img",attrs:{src:e.image,mode:"aspectFill"}})]):t._e()})),t._v(" "),s("div",{staticClass:"van-icon van-icon-arrow van-cell__right-icon"})]),t._v(" "),s("div",{staticClass:"businessInfo"},[s("p",[t._v("卖家："+t._s(t.shopName))]),t._v(" "),s("p",[t._v("原因："+t._s(t.reason))]),t._v(" "),s("p",[t._v(t._s(t.state[t.details.refundType])+"说明："+t._s(t.details.content))]),t._v(" "),s("p",[t._v("退款金额："+t._s(t.details.price))]),t._v(" "),s("p",[t._v("申请时间："+t._s(t.details.createTime))]),t._v(" "),s("p",[t._v("编号："+t._s(t.details.orderRefundNo))]),t._v(" "),s("div",[s("ul",{staticClass:"weui-uploader__files"},[t.details.img1?s("li",{staticClass:"weui-uploader__file",style:{backgroundImage:"url("+t.details.img1+")"},attrs:{alt:""}}):t._e(),t._v(" "),t.details.img2?s("li",{staticClass:"weui-uploader__file",style:{backgroundImage:"url("+t.details.img2+")"},attrs:{alt:""}}):t._e(),t._v(" "),t.details.img3?s("li",{staticClass:"weui-uploader__file",style:{backgroundImage:"url("+t.details.img3+")"},attrs:{alt:""}}):t._e()],1)],1)],1)],1),t._v(" "),s("div",{staticClass:"btnGroup clearfix"},[0==t.details.state||2==t.details.state?s("div",{staticClass:"revise",attrs:{eventid:"3"},on:{click:t.revise}},[t._v("修改申请")]):t._e(),t._v(" "),0==t.details.state?s("div",{staticClass:"cancel",attrs:{eventid:"4"},on:{click:t.revokes}},[t._v("撤销申请")]):t._e(),t._v(" "),s("div",{staticClass:"cancel contact"},[t._v("联系客服 "),s("button",{attrs:{"open-type":"contact"}},[t._v("联系客服")])],1)]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.wellMsgShow,expression:"wellMsgShow"}],staticClass:"wellMsg"},[t._v("\n    "+t._s(t.msg)+"\n  ")])]):t._e()},staticRenderFns:[]};e.a=a},"5hBY":function(t,e,s){"use strict";var a=s("PWnL"),i=s("5h59");var n=function(t){s("LJfC")},r=s("ybqe")(a.a,i.a,n,"data-v-64d02b30",null);e.a=r.exports},LJfC:function(t,e){},PWnL:function(t,e,s){"use strict";var a=s("woOf"),i=s.n(a),n=s("//Fk"),r=s.n(n),o=s("mvHQ"),d=s.n(o),c=s("Xxa5"),l=s.n(c),u=s("exGp"),v=s.n(u),f=s("qTHA"),h=s("xzGo"),p=s("dIy6");e.a={mixins:[p.a],data:function(){return{isFh:!1,msg:"",wellMsgShow:!1,state:["退款","退货","换货"],stateName:["等待商家处理","已完成","商家已拒绝","商家已同意","等待商家确认收货","已撤销"],shopName:"",details:{},reasonList:[{id:1,text:"不喜欢/不想要"},{id:2,text:"未按约定时间发货"},{id:3,text:"空包裹"},{id:4,text:"快递/物流未送达"}],goods:[],stateIndex:"",refundTypeIndex:"",logisticsNum:"",isFetch:!1}},computed:{reason:function(){var t=this,e=this.reasonList.findIndex(function(e){return e.id==t.details.type});return-1!==e?this.reasonList[e].text:""}},methods:{sendNum:function(t){var e=this;return v()(l.a.mark(function s(){var a;return l.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(""==e.logisticsNum){s.next=9;break}return f.a.showLoading(),s.next=4,h.a.sendLogisticsNum({logisticsNo:e.logisticsNum,orderRefundId:t});case 4:a=s.sent,f.a.hideLoading(),1===a.code?f.a.startPullDownRefresh():f.a.showToast({title:a.desc,icon:"none",duration:1500}),s.next=10;break;case 9:e.mySetTimeout("请输入物流单号！");case 10:case"end":return s.stop()}},s,e)}))()},revise:function(){var t=this.details.refundType,e=void 0;switch(t){case 0:case 1:e="/pages/refund/refund";break;case 2:e="/pages/refund/barter"}3!=t?this.$router.push({path:e,query:{orderId:this.details.orderId,type:t,orderRefundId:this.details.id,price:this.details.price,freight:this.details.freight,data:d()({content:this.details.content,img1:this.details.img1,img2:this.details.img2,img3:this.details.img3})}}):this.$router.push({path:e,query:{orderId:this.orderId,type:t,orderRefundId:this.details.id}})},revokes:function(){var t=this;f.a.showModal({title:"撤销申请",content:"您确定要撤销该订单的售后申请吗？",success:function(e){if(e.confirm){var s=t.orderRefundId;h.a.backRefund({orderRefundId:s}).then(function(e){f.a.setStorageSync("is-list-update",!0),f.a.showToast({title:"操作成功",icon:"none",duration:1500}),t.$router.back()}).catch(function(t){f.a.showToast({title:"操作失败"})})}}})},mySetTimeout:function(t){var e=this;e.wellMsgShow=!0,e.msg=t,setTimeout(function(){e.wellMsgShow=!1,e.msg=""},1e3)},fetch:function(){var t=this;return v()(l.a.mark(function e(){var s,a,i,n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.orderRefundId,e.next=3,h.a.getRefundDetails({orderRefundId:s});case 3:return a=e.sent,t.isFetch=!0,1===a.code&&(t.details=a.data,t.goods=a.data.goodsList,t.stateIndex=a.data.state,t.refundTypeIndex=a.data.refundType,i=a.data.refundType,n=a.data.state,1!==i&&2!==i||(0!==n&&2!==n&&5!==n||(t.isFh=!1),1!==n&&3!==n&&4!==n||(t.isFh=!0))),e.abrupt("return",r.a.resolve());case 7:case"end":return e.stop()}},e,t)}))()}},created:function(){var t=this;return v()(l.a.mark(function e(){var s;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s=t,f.a.getStorage({key:"shopName",success:function(t){s.shopName=t.data}});case 2:case"end":return e.stop()}},e,t)}))()},onPullDownRefresh:function(){var t=this;return v()(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetch();case 2:f.a.stopPullDownRefresh();case 3:case"end":return e.stop()}},e,t)}))()},onShow:function(){f.a.getStorageSync("update")&&(f.a.removeStorageSync("update"),f.a.startPullDownRefresh())},mounted:function(){var t=this;return v()(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.orderRefundId=t.$route.query.id,f.a.showLoading({title:"加载中"}),e.next=4,t.fetch();case 4:f.a.hideLoading();case 5:case"end":return e.stop()}},e,t)}))()},onUnload:function(){i()(this,this.$options.data())}}}},["9uQR"]);