global.webpackJsonp([12],{IjsX:function(t,s){},kYFs:function(t,s,e){"use strict";var i=e("woOf"),a=e.n(i),n=e("Xxa5"),o=e.n(n),c=e("exGp"),r=e.n(c),l=e("qTHA"),m=e("xzGo"),u=e("QmSG");s.a={data:function(){return{orderId:"",type:"",freight:"",price:"",isCheck:0,reasonList:[{id:1,text:"原因一"},{id:2,text:"原因二"},{id:3,text:"原因三"},{id:4,text:"原因四"}],img1:"",img2:"",img3:"",reason:"",wellShow:!1,wellMsgShow:!1,msg:"",explain:""}},components:{},methods:{check:function(t,s){this.isCheck=t,this.reason=s,this.wellShow=!1},chooseImg:function(t){var s=this;l.a.chooseImage({count:1,success:function(e){console.log(e),s.uploadImg(e.tempFilePaths[0],function(e){s.img=e,1===t&&(s.img1=e),2===t&&(s.img2=e),3===t&&(s.img3=e)})}})},uploadImg:function(t,s){var e=this;l.a.uploadFile({url:u.a.uploadImageUrl,filePath:t,name:"file",formData:{name:t.substring(10),key:"img/${filename}",policy:u.a.imgPolicy,OSSAccessKeyId:"6MKOqxGiGU4AUk44",success_action_status:"200",signature:u.a.imgSignature},success:function(i){if(console.log(i),400===i.statusCode)e.mySetTimeout("图片大小不能超过2m!");else if(200===i.statusCode){if(e.maxNum&&e.imgList.length>=e.maxNum)return void e.mySetTimeout("不能超过3张图片噢！");s(u.a.uploadImageUrl+"/img"+t.substring(10))}},fail:function(t){console.log(t)}})},closeImg:function(t,s){this[t]=""},submit:function(){var t=this;return r()(o.a.mark(function s(){var e;return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(""!==t.explain){s.next=3;break}return t.mySetTimeout("请填写退款说明!"),s.abrupt("return",!1);case 3:return s.next=5,m.a.retreatGoods({orderId:t.orderId,refundType:t.type,result:t.explain,img1:t.img1,img2:t.img2,img3:t.img3});case 5:e=s.sent,console.log("退款/货",e),1===e.code&&t.$router.push("/pages/my/after");case 8:case"end":return s.stop()}},s,t)}))()},mySetTimeout:function(t){var s=this;s.wellMsgShow=!0,s.msg=t,setTimeout(function(){s.wellMsgShow=!1,s.msg=""},1e3)}},mounted:function(){if(this.orderId=this.$route.query.orderId,this.type=this.$route.query.type,this.price=Number(this.$route.query.price),this.freight=Number(this.$route.query.freight),this.$route.query.data){var t=JSON.parse(this.$route.query.data);this.explain=t.result,this.img1=t.img1,this.img2=t.img2,this.img3=t.img3}1===this.type&&(this.price-=this.freight,this.isRefund=!1)},onUnload:function(){a()(this,this.$options.data())}}},nWeP:function(t,s,e){"use strict";var i=e("kYFs"),a=e("wbF5");var n=function(t){e("IjsX")},o=e("ybqe")(i.a,a.a,n,"data-v-cdc7a8ac",null);s.a=o.exports},wbF5:function(t,s,e){"use strict";var i={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"wrapper"},[0==t.type?e("p",{staticClass:"refundReason",attrs:{eventid:"0"},on:{click:function(s){t.wellShow=!0}}},[t._v("退款原因"),e("span",{staticClass:"reason"},[t._v(t._s(t.reason))])]):t._e(),t._v(" "),1==t.type?e("p",{staticClass:"refundReason",attrs:{eventid:"1"},on:{click:function(s){t.wellShow=!0}}},[t._v("退货原因"),e("span",{staticClass:"reason"},[t._v(t._s(t.reason))])]):t._e(),t._v(" "),e("p",{staticClass:"refundPrice"},[t._v("\n    退款金额："),e("span",{staticClass:"price"},[t._v("￥"+t._s(t.price))]),t._v(" "),0==t.type?e("span",{staticClass:"freight"},[t._v("含邮费 ￥"+t._s(t.freight))]):t._e(),t._v(" "),1==t.type?e("span",{staticClass:"freight"},[t._v("不含邮费 ￥"+t._s(t.freight))]):t._e()]),t._v(" "),e("div",{staticClass:"refundExplain"},[e("p",{staticClass:"title"},[t._v(t._s(0==t.type?"退款说明":"退货说明")+"："),e("span",[t._v("(最多可输入50个字)")])]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.explain,expression:"explain"}],staticClass:"explain",attrs:{name:"",id:"",maxlength:"50",eventid:"2"},domProps:{value:t.explain},on:{input:function(s){s.target.composing||(t.explain=s.target.value)}}})],1),t._v(" "),1==t.type?e("div",{staticClass:"refundVoucher"},[e("p",{staticClass:"title"},[t._v("上传凭证："),e("span",[t._v("(最多可上传3张)")])]),t._v(" "),e("div",{staticClass:"images"},[e("div",{staticClass:"img",attrs:{eventid:"4"},on:{click:function(s){t.chooseImg(1)}}},[t.img1?e("img",{attrs:{src:t.img1,alt:""}}):e("img",{attrs:{src:"../../assets/img/my/upimg.png",alt:""}}),t._v(" "),t.img1?e("span",{staticClass:"close",attrs:{eventid:"3"},on:{click:function(s){s.stopPropagation(),t.closeImg("img1",t.event)}}}):t._e()]),t._v(" "),t.img1?e("div",{staticClass:"img",attrs:{eventid:"6"},on:{click:function(s){t.chooseImg(2)}}},[t.img2?e("img",{attrs:{src:t.img2,alt:""}}):e("img",{attrs:{src:"../../assets/img/my/upimg.png",alt:""}}),t._v(" "),t.img2?e("span",{staticClass:"close",attrs:{eventid:"5"},on:{click:function(s){s.stopPropagation(),t.closeImg("img2",t.event)}}}):t._e()]):t._e(),t._v(" "),t.img2?e("div",{staticClass:"img",attrs:{eventid:"8"},on:{click:function(s){t.chooseImg(3)}}},[t.img3?e("img",{attrs:{src:t.img3,alt:""}}):e("img",{attrs:{src:"../../assets/img/my/upimg.png",alt:""}}),t._v(" "),t.img3?e("span",{staticClass:"close",attrs:{eventid:"7"},on:{click:function(s){s.stopPropagation(),t.closeImg("img3",t.event)}}}):t._e()]):t._e()])],1):t._e(),t._v(" "),e("div",{staticClass:"submit",attrs:{eventid:"9"},on:{click:t.submit}},[t._v("提交")]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.wellShow,expression:"wellShow"}],staticClass:"well"},[e("div",{staticClass:"box"},[0==t.type?e("p",{staticClass:"head"},[t._v("请选择退款原因")]):t._e(),t._v(" "),1==t.type?e("p",{staticClass:"head"},[t._v("请选择退货原因")]):t._e(),t._v(" "),t._l(t.reasonList,function(s,i){return e("p",{key:i,staticClass:"select",attrs:{eventid:"10-"+i},on:{click:function(e){t.check(s.id,s.text)}}},[e("span",{staticClass:"check",class:{checked:t.isCheck==s.id}}),t._v(" "),e("span",[t._v(t._s(s.text))])])})],2)]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.wellMsgShow,expression:"wellMsgShow"}],staticClass:"wellMsg"},[t._v("\n    "+t._s(t.msg)+"\n  ")])],1)},staticRenderFns:[]};s.a=i}},["emt2"]);