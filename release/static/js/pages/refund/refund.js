global.webpackJsonp([11],{IjsX:function(t,e){},kYFs:function(t,e,s){"use strict";var i=s("woOf"),a=s.n(i),n=s("Xxa5"),o=s.n(n),c=s("exGp"),r=s.n(c),l=s("qTHA"),m=s("xzGo"),u=s("QmSG");e.a={data:function(){return{orderId:"",type:"",freight:"",price:"",isCheck:0,reasonList:[{id:1,text:"不喜欢/不想要"},{id:2,text:"未按约定时间发货"},{id:3,text:"空包裹"},{id:4,text:"快递/物流未送达"}],img1:"",img2:"",img3:"",reason:"",wellShow:!1,wellMsgShow:!1,msg:"",explain:""}},components:{},methods:{check:function(t,e){this.isCheck=t,this.reason=e,this.wellShow=!1},chooseImg:function(t){var e=this;l.a.chooseImage({count:1,success:function(s){console.log(s),e.uploadImg(s.tempFilePaths[0],function(s){e.img=s,1===t&&(e.img1=s),2===t&&(e.img2=s),3===t&&(e.img3=s)})}})},uploadImg:function(t,e){var s=this;l.a.uploadFile({url:u.a.uploadImageUrl,filePath:t,name:"file",formData:{name:t.substring(10),key:"img/${filename}",policy:u.a.imgPolicy,OSSAccessKeyId:"6MKOqxGiGU4AUk44",success_action_status:"200",signature:u.a.imgSignature},success:function(i){if(console.log(i),400===i.statusCode)s.mySetTimeout("图片大小不能超过2m!");else if(200===i.statusCode){if(s.maxNum&&s.imgList.length>=s.maxNum)return void s.mySetTimeout("不能超过3张图片噢！");e(u.a.uploadImageUrl+"/img"+t.substring(10))}},fail:function(t){console.log(t)}})},closeImg:function(t,e){this[t]=""},submit:function(){var t=this;return r()(o.a.mark(function e(){var s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t.explain){e.next=3;break}return t.mySetTimeout("请填写退款说明!"),e.abrupt("return",!1);case 3:return e.next=5,m.a.retreatGoods({orderId:t.orderId,refundType:t.type,result:t.explain,img1:t.img1,img2:t.img2,img3:t.img3});case 5:s=e.sent,console.log("退款/货",s),1===s.code&&t.$router.push("/pages/my/after");case 8:case"end":return e.stop()}},e,t)}))()},mySetTimeout:function(t){var e=this;e.wellMsgShow=!0,e.msg=t,setTimeout(function(){e.wellMsgShow=!1,e.msg=""},1e3)}},mounted:function(){switch(this.orderId=this.$route.query.orderId,this.type=this.$route.query.type,this.price=Number(this.$route.query.price),this.freight=Number(this.$route.query.freight),this.type){case 0:l.a.setNavigationBarTitle({title:"仅退款"})}if(this.$route.query.data){var t=JSON.parse(this.$route.query.data);this.explain=t.result,this.img1=t.img1,this.img2=t.img2,this.img3=t.img3}1===this.type&&(this.price-=this.freight,this.isRefund=!1)},onUnload:function(){a()(this,this.$options.data())}}},nWeP:function(t,e,s){"use strict";var i=s("kYFs"),a=s("wbF5");var n=function(t){s("IjsX")},o=s("ybqe")(i.a,a.a,n,"data-v-cdc7a8ac",null);e.a=o.exports},wbF5:function(t,e,s){"use strict";var i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrapper"},[0==t.type?s("p",{staticClass:"refundReason",attrs:{eventid:"0"},on:{click:function(e){t.wellShow=!0}}},[t._v("退款原因"),s("span",{staticClass:"reason"},[t._v(t._s(t.reason))])]):t._e(),t._v(" "),1==t.type?s("p",{staticClass:"refundReason",attrs:{eventid:"1"},on:{click:function(e){t.wellShow=!0}}},[t._v("退货原因"),s("span",{staticClass:"reason"},[t._v(t._s(t.reason))])]):t._e(),t._v(" "),s("p",{staticClass:"refundPrice"},[t._v("\n    退款金额："),s("span",{staticClass:"price"},[t._v("￥"+t._s(t.price))]),t._v(" "),0==t.type?s("span",{staticClass:"freight"},[t._v("含邮费 ￥"+t._s(t.freight))]):t._e(),t._v(" "),1==t.type?s("span",{staticClass:"freight"},[t._v("不含邮费 ￥"+t._s(t.freight))]):t._e()]),t._v(" "),s("div",{staticClass:"refundExplain"},[s("p",{staticClass:"title"},[t._v(t._s(0==t.type?"退款说明":"退货说明")+"：")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.explain,expression:"explain"}],staticClass:"explain",attrs:{name:"",id:"",maxlength:"50",placeholder:"(最多可输入50个字)",eventid:"2"},domProps:{value:t.explain},on:{input:function(e){e.target.composing||(t.explain=e.target.value)}}})],1),t._v(" "),1==t.type?s("div",{staticClass:"refundVoucher"},[s("p",{staticClass:"title"},[t._v("上传凭证："),s("span",[t._v("(最多可上传3张)")])]),t._v(" "),s("div",{staticClass:"images"},[s("div",{staticClass:"img",attrs:{eventid:"4"},on:{click:function(e){t.chooseImg(1)}}},[t.img1?s("img",{attrs:{src:t.img1,alt:""}}):s("img",{attrs:{src:"../../assets/img/my/upimg.png",alt:""}}),t._v(" "),t.img1?s("span",{staticClass:"close",attrs:{eventid:"3"},on:{click:function(e){e.stopPropagation(),t.closeImg("img1",t.event)}}}):t._e()]),t._v(" "),t.img1?s("div",{staticClass:"img",attrs:{eventid:"6"},on:{click:function(e){t.chooseImg(2)}}},[t.img2?s("img",{attrs:{src:t.img2,alt:""}}):s("img",{attrs:{src:"../../assets/img/my/upimg.png",alt:""}}),t._v(" "),t.img2?s("span",{staticClass:"close",attrs:{eventid:"5"},on:{click:function(e){e.stopPropagation(),t.closeImg("img2",t.event)}}}):t._e()]):t._e(),t._v(" "),t.img2?s("div",{staticClass:"img",attrs:{eventid:"8"},on:{click:function(e){t.chooseImg(3)}}},[t.img3?s("img",{attrs:{src:t.img3,alt:""}}):s("img",{attrs:{src:"../../assets/img/my/upimg.png",alt:""}}),t._v(" "),t.img3?s("span",{staticClass:"close",attrs:{eventid:"7"},on:{click:function(e){e.stopPropagation(),t.closeImg("img3",t.event)}}}):t._e()]):t._e()])],1):t._e(),t._v(" "),s("div",{staticClass:"submit",attrs:{eventid:"9"},on:{click:t.submit}},[t._v("提交")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.wellShow,expression:"wellShow"}],staticClass:"well"},[s("div",{staticClass:"box"},[0==t.type?s("p",{staticClass:"head"},[t._v("请选择退款原因")]):t._e(),t._v(" "),1==t.type?s("p",{staticClass:"head"},[t._v("请选择退货原因")]):t._e(),t._v(" "),t._l(t.reasonList,function(e,i){return s("p",{key:i,staticClass:"select",attrs:{eventid:"10-"+i},on:{click:function(s){t.check(e.id,e.text)}}},[s("span",{staticClass:"check",class:{checked:t.isCheck==e.id}}),t._v(" "),s("span",[t._v(t._s(e.text))])])})],2)]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.wellMsgShow,expression:"wellMsgShow"}],staticClass:"wellMsg"},[t._v("\n    "+t._s(t.msg)+"\n  ")])],1)},staticRenderFns:[]};e.a=i}},["emt2"]);