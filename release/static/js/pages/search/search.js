global.webpackJsonp([10],{"1p8d":function(t,s,e){"use strict";var a=e("woOf"),i=e.n(a),o=e("//Fk"),r=e.n(o),n=e("Dd8w"),l=e.n(n),c=e("Xxa5"),d=e.n(c),v=e("exGp"),h=e.n(v),_=e("qTHA"),m=e("xzGo"),u=e("Lazl");s.a={data:function(){return{hasFilter:!1,searchStr:"",visible:!1,showType:!0,keyword:"",wellMsgShow:"",msg:"",goodsList:[],ob:0,sortTabs:0,sortTime:0,sortSales:2,sortPrice:4,sortStyle:null,state:1,pageSize:10,pageNumber:1,totalPage:null,nodata:!1,totalRow:0,filterOptions:{},isFocus:!1,searchEmptyData:!1,searchData:!1}},components:{"filter-goods-modal":u.a},watch:{keyword:function(t){this.searchEmptyData&&!t&&(this.searchEmptyData=!1),!t&&this.searchData&&(this.goodsList=[],this.searchData=!1)}},methods:{sortFn:function(t,s){this.sortTabs=t,0===s&&(this.sortTime=this.sortStyle=1),1===s&&(this.sortTime=this.sortStyle=0),2===s&&(this.sortSales=this.sortStyle=3),3===s&&(this.sortSales=this.sortStyle=2),4===s&&(this.sortPrice=this.sortStyle=5),5===s&&(this.sortPrice=this.sortStyle=4),this.ob=s,this.pageNumber=1,this.setGoodsList()},clickItem:function(t){this.$router.push({path:"/pages/home/details/details",query:{goodsId:t.id}})},search:function(){var t=this;return h()(d.a.mark(function s(){return d.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!t.keyword){s.next=15;break}return t.sortTabs=1,t.searchStr=t.keyword,t.pageNumber=1,t.filterOptions={},t.hasFilter=!1,t.$refs.filterRef._reset(),t.nodata=!1,m.a.saveHistory({message:t.keyword}),s.next=11,t.setGoodsList();case 11:s.sent.length||(t.searchEmptyData=!0),s.next=16;break;case 15:_.a.showToast({title:"请输入关键字",icon:"none"});case 16:case"end":return s.stop()}},s,t)}))()},handleFilterClick:function(){(this.hasFilter||this.goodsList.length)&&(this.visible=!0)},handleHistoryClear:function(){m.a.deleteHistory()},handleModalToggle:function(t){this.visible=t},handleConfirm:function(t){var s=t.labelId,e=t.deliveryId,a=t.min,i=t.max;this.handleModalToggle(!1),this.filterOptions={labelId:s,deliveryId:e,min:a,max:i},this.hasFilter=!0,this.pageNumber=1,this.setGoodsList()},handleRest:function(){this.filterOptions={},this.pageNumber=1,this.hasFilter=!1,this.setGoodsList()},setGoodsList:function(){var t=this;return h()(d.a.mark(function s(){var e,a,i,o,n,c,v;return d.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t.loading=!0,_.a.showLoading({title:"正在搜索"}),e=t.state,a=t.ob,i=t.pageNumber,o=t.searchStr,t.keyword!==o&&(t.keyword=o),1===i&&(t.goodsList=[],t.nodata=!1),s.next=7,m.a.getGoods(l()({state:e,ob:a,pageSize:20,pageNumber:i,keyword:o},t.filterOptions));case 7:if(n=s.sent,_.a.hideLoading(),t.loading=!1,c=n.data,v=c.list,c.lastPage,1!==n.code){s.next=18;break}if(1!==i||v.length){s.next=15;break}return t.nodata=!0,s.abrupt("return",r.a.resolve([]));case 15:v.length&&(t.searchData=!0),t.goodsList=t.goodsList.concat(v),t.pageNumber++;case 18:return s.abrupt("return",r.a.resolve(v));case 19:case"end":return s.stop()}},s,t)}))()},mySetTimeout:function(t){var s=this;s.wellMsgShow=!0,s.msg=t,setTimeout(function(){s.wellMsgShow=!1,s.msg=""},1e3)}},mounted:function(){var t=this;return h()(d.a.mark(function s(){var e;return d.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:(e=t.$route.query.key)?(t.sortTabs=1,t.keyword=e,t.searchStr=e,t.search()):m.a.selectHistoryPage({pageNumber:1,pageSize:10});case 2:case"end":return s.stop()}},s,t)}))()},onUnload:function(){i()(this,this.$options.data())}}},NcgL:function(t,s,e){"use strict";var a=e("1p8d"),i=e("gr5/");var o=function(t){e("W0gU")},r=e("ybqe")(a.a,i.a,o,"data-v-c4a654ac",null);s.a=r.exports},W0gU:function(t,s){},"gr5/":function(t,s,e){"use strict";var a={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"wrapper",class:{"no-keyword":!t.searchData}},[e("div",{staticClass:"search-bar"},[e("div",{staticClass:"search-bar__form"},[e("div",{staticClass:"search-bar__box"},[e("i",{staticClass:"icon-search"}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],staticClass:"search-bar__input",attrs:{type:"text",placeholder:"请搜索商品","auto-focus":"","confirm-type":"search",eventid:"0"},domProps:{value:t.keyword},on:{confirm:function(s){t.search()},input:function(s){s.target.composing||(t.keyword=s.target.value)}}}),t._v(" "),e("i",{staticClass:"icon-clear"})],1)]),t._v(" "),e("div",{staticClass:"search-bar__cancel-btn",attrs:{eventid:"1"},on:{click:function(s){t.search()}}},[t._v("搜索")])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.keyword.length,expression:"!keyword.length"}],staticClass:"history-container"},[e("div",{staticClass:"history__hd"},[e("div",{staticClass:"history__title"},[e("i",{staticClass:"clock-icon"}),t._v(" "),e("span",[t._v("历史搜索记录")])],1),t._v(" "),e("i",{staticClass:"history-clear-icon",attrs:{eventid:"2"},on:{click:t.handleHistoryClear}})],1),t._v(" "),t._m(0)]),t._v(" "),t.searchEmptyData?e("div",{staticClass:"msg"},[e("p",[t._v("换个搜索词试试！")])],1):t._e(),t._v(" "),t.searchData?e("block",[e("ul",{staticClass:"sortTabs"},[e("li",{staticClass:"sortItem",class:{active:1==t.sortTabs,fx:0==t.sortStyle,fs:1==t.sortStyle},attrs:{eventid:"3"},on:{click:function(s){t.sortFn(1,t.sortTime)}}},[t._v("综合")]),t._v(" "),e("li",{staticClass:"sortItem",class:{active:2==t.sortTabs,fx:2==t.sortStyle,fs:3==t.sortStyle},attrs:{eventid:"4"},on:{click:function(s){t.sortFn(2,t.sortSales)}}},[t._v("销量")]),t._v(" "),e("li",{staticClass:"sortItem",class:{active:3==t.sortTabs,fx:4==t.sortStyle,fs:5==t.sortStyle},attrs:{eventid:"5"},on:{click:function(s){t.sortFn(3,t.sortPrice)}}},[t._v("价格")]),t._v(" "),e("li",{staticClass:"sortItem sx",class:{active:t.hasFilter},attrs:{eventid:"6"},on:{click:t.handleFilterClick}},[t._v("筛选")]),t._v(" "),e("li",{staticClass:"sortItem menu",attrs:{eventid:"7"},on:{click:function(s){t.showType=!t.showType}}})],1),t._v(" "),t.goodsList.length?e("div",{staticClass:"goodsList clearfix",attrs:{eventid:"9"},on:{click:function(s){t.clickItem(t.item)}}},[t._l(t.goodsList,function(s,a){return t.showType?e("div",{key:a,staticClass:"item"},[e("div",{staticClass:"img"},[s.image?e("img",{attrs:{src:s.image,alt:"",mode:"aspectFill"}}):e("img",{attrs:{src:"../../assets/img/classify/goods.png",alt:"",mode:"aspectFill"}})]),t._v(" "),e("div",{staticClass:"text"},[e("p",{staticClass:"title zan-ellipsis",domProps:{textContent:t._s(s.name)}}),t._v(" "),e("p",{staticClass:"intro clearfix"},[e("span",{staticClass:"qh"},[t._v("期货:"+t._s(s.delivery))]),t._v(" "),e("span",{staticClass:"xl"},[t._v("销量:"+t._s(9999==s.sellCount?"9999+":s.sellCount))])]),t._v(" "),e("p",{staticClass:"price-btn"},[e("span",{staticClass:"price"},[t._v("批货价:￥"+t._s(s.sellPrice))]),t._v(" "),e("span",{staticClass:"btn"},[t._v("立即采购")])])],1)]):t._e()}),t._v(" "),t._l(t.goodsList,function(s,a){return t.showType?t._e():e("div",{key:a,staticClass:"line-item",attrs:{eventid:"8-"+a},on:{click:function(e){t.clickItem(s)}}},[e("div",{staticClass:"img"},[s.image?e("img",{attrs:{src:s.image,alt:"",mode:"aspectFill"}}):e("img",{attrs:{src:"../../assets/img/classify/goods.png",alt:"",mode:"aspectFill"}})]),t._v(" "),e("div",{staticClass:"text"},[e("p",{staticClass:"title"},[t._v(t._s(s.name))]),t._v(" "),e("p",{staticClass:"qh"},[t._v("期货:"+t._s(s.delivery))]),t._v(" "),e("p",{staticClass:"xl"},[t._v("销量:"+t._s(9999==s.sellCount?"9999+":s.sellCount))]),t._v(" "),e("p",{staticClass:"price-btn clearfix"},[e("span",{staticClass:"price"},[t._v("批货价:￥"+t._s(s.sellPrice))]),t._v(" "),e("span",{staticClass:"btn"},[t._v("立即采购")])])],1)])}),t._v(" "),t.loading?e("div",[e("zan-loading",{attrs:{mpcomid:"0"}})],1):t._e()],2):t._e(),t._v(" "),t.nodata?e("div",[e("div",{staticClass:"no_goods"},[e("div",{staticClass:"no_goods_img"}),t._v(" "),e("div",{staticClass:"no_goods_tip"},[t._v("没有相关的商品结果哦~~")])])]):t._e()],1):t._e(),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.wellMsgShow,expression:"wellMsgShow"}],staticClass:"wellMsg"},[t._v("\n      "+t._s(t.msg)+"\n    ")]),t._v(" "),e("filter-goods-modal",{ref:"filterRef",attrs:{show:t.visible,hasLabel:"",eventid:"10",mpcomid:"1"},on:{toggle:t.handleModalToggle,confirm:t.handleConfirm,rest:t.handleRest}})],1)},staticRenderFns:[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"history__list"},[e("span",{staticClass:"history__list-item"},[t._v("衬衫")]),t._v(" "),e("span",{staticClass:"history__list-item"},[t._v("上衣")]),t._v(" "),e("span",{staticClass:"history__list-item"},[t._v("牛仔长裤")]),t._v(" "),e("span",{staticClass:"history__list-item"},[t._v("衬衫")]),t._v(" "),e("span",{staticClass:"history__list-item"},[t._v("牛仔长裤")]),t._v(" "),e("span",{staticClass:"history__list-item"},[t._v("衬衫")])])}]};s.a=a}},["GkfG"]);