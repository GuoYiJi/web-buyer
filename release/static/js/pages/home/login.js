global.webpackJsonp([27],{"CE//":function(e,n,t){"use strict";var r={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"home"},[t("div",{staticClass:"login"},[e.userInfo.userInfo?t("p",[t("img",{staticClass:"icon_wx",attrs:{src:e.userInfo.userInfo.avatarUrl}})]):t("p",[t("i",{staticClass:"icon_wx"})],1),e._v(" "),t("p",[e._v(e._s(e.userInfo.userInfo?e.userInfo.userInfo.nickName:"微信登陆"))])],1),e._v(" "),t("i-message",{attrs:{id:"message",mpcomid:"0"}}),e._v(" "),e.userInfoBool?e._e():t("button",{staticClass:"user_btn wx_btn",attrs:{"open-type":"getUserInfo",eventid:"0"},on:{getuserinfo:e.getUserInfo}},[e._v("授权登陆")])],1)},staticRenderFns:[]};n.a=r},L8XK:function(e,n,t){"use strict";var r=t("Xxa5"),o=t.n(r),s=t("exGp"),a=t.n(s),c=t("qTHA"),u=t("90m7"),i=(t("QmSG"),t("O3Fp"));n.a={mixins:[u.a],components:{},data:function(){return{userInfoBool:!1,userInfo:{},code:""}},computed:{showBtn:function(){return this.userInfoBool}},methods:{getPhoneNumber:function(e){var n=this;return a()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.mp.detail.encryptedData){t.next=4;break}n.handleError("需要同意授权才可以使用噢！"),t.next=10;break;case 4:return t.next=6,c.a.getStorageSync("production_sessionId");case 6:if(!t.sent){t.next=9;break}return t.abrupt("return",n.toRoute("home/home"));case 9:n.login(e.mp.detail);case 10:case"end":return t.stop()}},t,n)}))()},getUserInfo:function(e){e.mp.detail.encryptedData?(this.userInfoBool=!0,this.userInfo=e.mp.detail,c.a.setStorageSync("production_scopeUserInfo",!0),this.login()):this.handleError("需要同意授权才可以使用噢！")},login:function(e){var n=this;return a()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.authLogin({code:n.code,avatar:n.userInfo.userInfo.avatarUrl,nick:n.userInfo.userInfo.nickName,encryptedData:n.userInfo.encryptedData,iv:n.userInfo.iv}).then(function(e){console.log("ssfsdf"),c.a.reLaunch({url:"/pages/home/home"})});case 2:case"end":return e.stop()}},e,n)}))()}},mounted:function(){var e=this;return a()(o.a.mark(function n(){var t;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t=e,c.a.login({success:function(){var n=a()(o.a.mark(function n(t){return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t.code?(e.code=t.code,c.a.getUserInfo({success:function(n){e.userInfoBool=!0,e.userInfo=n,e.login()},fail:function(e){}})):console.log("登录失败！"+t.errMsg);case 1:case"end":return n.stop()}},n,e)}));return function(e){return n.apply(this,arguments)}}(),fail:function(){t.handleError("授权失败！")}});case 2:case"end":return n.stop()}},n,e)}))()}}},gGg4:function(e,n){},qKiT:function(e,n,t){"use strict";var r=t("L8XK"),o=t("CE//");var s=function(e){t("gGg4")},a=t("ybqe")(r.a,o.a,s,"data-v-52f9708e",null);n.a=a.exports}},["hT9K"]);