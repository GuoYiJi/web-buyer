global.webpackJsonp([5],{"57bS":function(t,e,s){"use strict";var a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"home"},[s("zan-tab",{attrs:{list:t.navData,"selected-id":t.selectedId,eventid:"0",mpcomid:"0"},on:{tabchange:t.handleZanTabChange}}),t._v(" "),s("div",{staticClass:"content"},t._l(t.navData,function(e,a){return t.selectedId===e.id?s("div",{key:a},[t._l(e.list,function(e,i){return s("orderItem",{key:e.orderNo,attrs:{item:e,shopName:t.shopName,eventid:"1-"+a+"-"+i,mpcomid:"1-"+a+"-"+i},on:{refreshOrder:t.refreshOrder,confirm:t.handleConfirm}})}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]},[s("zan-loading",{attrs:{mpcomid:"2-"+a}})],1),t._v(" "),!e.list.length&&e.lastPage?s("div",[s("zan-loadmore",{attrs:{type:"text",text:"暂无数据",mpcomid:"3-"+a}})],1):t._e(),t._v(" "),e.list.length&&e.lastPage?s("div",[s("zan-loadmore",{attrs:{type:"text",mpcomid:"4-"+a}})],1):t._e()],2):t._e()}))],1)},staticRenderFns:[]};e.a=a},Lzb9:function(t,e,s){"use strict";var a=s("woOf"),i=s.n(a),n=s("//Fk"),r=s.n(n),l=s("Dd8w"),c=s.n(l),o=s("Xxa5"),d=s.n(o),u=s("exGp"),v=s.n(u),_=s("qTHA"),m=s("q6Rk"),f=s("xzGo");e.a={components:{orderItem:m.a},data:function(){return{tag:null,orderList:[],shopName:"",selectedId:"all",loading:!1,navData:[{id:"all",list:[],pageNumber:1,title:"全部"},{id:"pay",list:[],pageNumber:1,state:1,title:"待付款"},{id:"tosend",list:[],pageNumber:1,state:5,title:"待发货"},{id:"sign",list:[],pageNumber:1,state:6,title:"待收货"},{id:"done",list:[],pageNumber:1,state:7,title:"已完成"}]}},methods:{refreshOrder:function(t){t&&(this.tag=t),this.getOrder(this.navData[this.tag-1].state)},myTag:function(){var t=this.$route.query.tag;this.tag=t},getOrder:function(t){var e=this;return v()(d.a.mark(function s(){var a,i,n,r,l,c,o,u,v,_,m;return d.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return a={isPing:0,pageSize:10},t&&(a.state=t),s.next=4,f.a.myOrder(a);case 4:i=s.sent,console.log(i),e.orderList=i.data.list,n=0;case 8:if(!(n<e.orderList.length)){s.next=40;break}r=0;case 10:if(!(r<e.orderList[n].goodsList.length)){s.next=37;break}l=[],c=0;case 13:if(!(c<e.orderList[n].goodsList[r].skuList.length)){s.next=33;break}o=e.orderList[n].goodsList[r].skuList[c],u={},v=o.skuCode.split(","),u.colorVal=v[0],u.text=v[0]+":"+v[1]+"/"+o.num+"件",_=!1,m=0;case 21:if(!(m<l.length)){s.next=29;break}if(l[m].colorVal!==v[0]){s.next=26;break}return l[m].text+=";"+v[1]+"/"+o.num+"件",_=!0,s.abrupt("break",29);case 26:m++,s.next=21;break;case 29:_||l.push(u);case 30:c++,s.next=13;break;case 33:e.orderList[n].goodsList[r].sizeTextArray=l;case 34:r++,s.next=10;break;case 37:n++,s.next=8;break;case 40:case"end":return s.stop()}},s,e)}))()},handleConfirm:function(t){var e=this,s=this.navData.findIndex(function(t){return t.id===e.selectedId}),a=this.navData[s],i=[],n=a.list.findIndex(function(e){return e.id===t.id});t.delete&&(i=a.list.filter(function(e){return e.id!==t.id})),t.cancel&&(i=0===s?a.list.map(function(t,e){return e===n&&(t.state=2),t}):a.list.filter(function(e){return e.id!==t.id})),this.navData.splice(s,1,c()({},a,{list:i}))},fetch:function(){var t=this;return new r.a(function(){var e=v()(d.a.mark(function e(s,a){var i,n,r,l,o,u,v,_,m,h,p,b,g,C,k,x,y,w;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!==(i=t.navData.findIndex(function(e){return e.id===t.selectedId}))){e.next=4;break}return a(),e.abrupt("return");case 4:if(n=t.navData[i],r=n.state,l=n.pageNumber,o={isPing:0,pageSize:10,state:r,pageNumber:l},!t.loading&&!n.lastPage){e.next=10;break}return e.abrupt("return");case 10:return t.loading=!0,e.next=13,f.a.myOrder(o);case 13:u=e.sent,v=u.data,_=v.list,m=v.lastPage,t.loading=!1,t.orderList=_,_.forEach(function(t,e){t.goodsList.forEach(function(t,s){var a=[];t.skuList.forEach(function(t,e){var s=t,i={},n=s.skuCode.split(",");i.colorVal=n[0],i.text=n[0]+":"+n[1]+"/"+s.num+"件";for(var r=!1,l=0;l<a.length;l++)if(a[l].colorVal===n[0]){a[l].text+=";"+n[1]+"/"+s.num+"件",r=!0;break}r||a.push(i)}),_[e].goodsList[s].sizeTextArray=a})}),h=0;case 21:if(!(h<_.length)){e.next=53;break}p=0;case 23:if(!(p<t.orderList[h].goodsList.length)){e.next=50;break}b=[],g=0;case 26:if(!(g<t.orderList[h].goodsList[p].skuList.length)){e.next=46;break}C=t.orderList[h].goodsList[p].skuList[g],k={},x=C.skuCode.split(","),k.colorVal=x[0],k.text=x[0]+":"+x[1]+"/"+C.num+"件",y=!1,w=0;case 34:if(!(w<b.length)){e.next=42;break}if(b[w].colorVal!==x[0]){e.next=39;break}return b[w].text+=";"+x[1]+"/"+C.num+"件",y=!0,e.abrupt("break",42);case 39:w++,e.next=34;break;case 42:y||b.push(k);case 43:g++,e.next=26;break;case 46:t.orderList[h].goodsList[p].sizeTextArray=b;case 47:p++,e.next=23;break;case 50:h++,e.next=21;break;case 53:t.navData.splice(i,1,c()({},n,{lastPage:m,list:n.list.concat(_),pageNumber:n.pageNumber+1})),s();case 55:case"end":return e.stop()}},e,t)}));return function(t,s){return e.apply(this,arguments)}}())},handleRefresh:function(t,e){var s=this.navData.findIndex(function(e){return e.id===t});this.navData.splice(s,1,c()({},this.navData[s],{list:[],lastPage:!1,pageNumber:1})),this.fetch().finally(function(){e()})},handleZanTabChange:function(t){var e=t.mp.detail;this.selectedId=e,this.handleRefresh(e)}},onPullDownRefresh:function(){this.handleRefresh(this.selectedId,function(){_.a.stopPullDownRefresh()})},onReachBottom:function(){this.fetch()},onShow:function(){_.a.getStorageSync("isOrderDelete")&&(_.a.removeStorageSync("isOrderDelete"),_.a.startPullDownRefresh())},mounted:function(){var t=this.$route.query.selectedId;t&&(this.selectedId=t),this.fetch();var e=this;_.a.getStorage({key:"shopName",success:function(t){e.shopName=t.data}})},onUnload:function(){i()(this,this.$options.data())}}},QeMz:function(t,e,s){"use strict";var a=s("Xxa5"),i=s.n(a),n=s("exGp"),r=s.n(n),l=(s("xzGo"),s("dIy6"));e.a={components:{},mixins:[l.a],props:{item:{},shopName:""},data:function(){return{visible1:!1,visible2:!1,visible3:!1,visible4:!1,visible5:!1,stateName:["","待付款","交易取消","已支付","支付失败","待发货","待收货","已完成","交易关闭","拼单中","售后中"],id:"",skuCodeList:[]}},methods:{bxq:function(t,e){this.visible1=!1,this.$router.push({path:"/pages/my/orderDetails/obligation",query:{id:t,xq:e}})},buyPay:function(t){},afterSale:function(t,e,s,a){this.$router.push({path:"/pages/refund/applyCustomer",query:{orderId:t,price:e,freight:s,type:a}})},logistics:function(t){this.$router.push({path:"/pages/my/logistics",query:{orderId:t}})},toOpen:function(t){this[t]=!0},toClose:function(t){this[t]=!1},handleOrderConfirmClick:function(t){var e=this;return r()(i.a.mark(function s(){var a;return i.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:s.prev=0,a=t.id,s.t0=t.type,s.next="delete"===s.t0?5:"cancel"===s.t0?7:"pay"===s.t0?9:11;break;case 5:return e.handleOrderDelete(a).then(function(t){e.$emit("confirm",{delete:!0,id:a})}),s.abrupt("break",11);case 7:return e.handleOrderCancel(a).then(function(t){e.$emit("confirm",{cancel:!0,id:a})}),s.abrupt("break",11);case 9:return wx.showModal({title:"付款提示",content:"确认付款",success:function(s){s.confirm&&e.$router.push({path:"/pages/my/orderDetails/obligation",query:{id:t.id}})}}),s.abrupt("break",11);case 11:s.next=16;break;case 13:s.prev=13,s.t1=s.catch(0),console.log(s.t1);case 16:case"end":return s.stop()}},s,e,[[0,13]])}))()},sureOrder:function(t){var e=this;return r()(i.a.mark(function s(){return i.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:e.handleOrderDone(t).then(function(t){wx.startPullDownRefresh()});case 1:case"end":return s.stop()}},s,e)}))()}},mounted:function(){var t=this;return r()(i.a.mark(function e(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},e,t)}))()},created:function(){var t=this;this.item&&this.item.goodsList&&this.item.goodsList.length>0&&this.item.goodsList.forEach(function(e,s){t.skuCodeList[s]=[],e.skuList.forEach(function(e,a){var i=e.skuCode.split(",")[0],n=e.skuCode.split(",")[1];t.skuCodeList[s][a]=[i,n,e.num,e.num-e.remainNum,e.remainNum]})})}}},Sxm0:function(t,e){},eKfA:function(t,e,s){"use strict";var a=s("Lzb9"),i=s("57bS");var n=function(t){s("Sxm0")},r=s("ybqe")(a.a,i.a,n,"data-v-841fa35a",null);e.a=r.exports},q6Rk:function(t,e,s){"use strict";var a=s("QeMz"),i=s("s2SI");var n=function(t){s("zB5p")},r=s("ybqe")(a.a,i.a,n,"data-v-0e1b543c",null);e.a=r.exports},s2SI:function(t,e,s){"use strict";var a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"home"},[s("div",{staticClass:"van-cell order-header"},[s("div",{staticClass:"van-cell__title"},[s("span",[t._v(t._s(t.shopName))])]),t._v(" "),s("div",{staticClass:"van-cell__value"},[s("span",{staticClass:"state"},[t._v(t._s(t.stateName[t.item.state]))])])]),t._v(" "),5!=t.item.state?s("div",[s("div",{staticClass:"van-cell van-cell--clickable goods-thumb__list",attrs:{eventid:"0"},on:{click:function(e){t.handleShopListClick(t.item.goodsList)}}},[s("div",{staticClass:"van-cell__title"},t._l(t.item.goodsList,function(e,a){return s("span",{key:a,staticClass:"goods-thumb-item"},[e.image&&a<3?s("img",{staticClass:"n-img",attrs:{src:e.image,mode:"aspectFill"}}):a<3?s("img",{staticClass:"n-img",attrs:{src:"http://www.qckj.link/upload/goods/20180520/1526794348353_160563.jpg"}}):t._e()])})),t._v(" "),s("div",{staticClass:"van-icon van-icon-arrow van-cell__right-icon"})]),t._v(" "),s("div",{staticClass:"below"},[s("div",{staticClass:"van-cell"},[s("div",{staticClass:"van-cell__title"},[s("span",{staticClass:"goods-buy__info"},[t._v("共"),s("span",{staticClass:"goods-buy__num"},[t._v(t._s(t.item.goodsListSize))]),t._v("个款  "),s("span",{staticClass:"goods-buy__num"},[t._v(t._s(t.item.num))]),t._v("件商品  ")])]),t._v(" "),s("div",{staticClass:"van-cell__value"},[s("span",{staticClass:"goods-buy__total"},[t._v("合计:")]),t._v(" "),s("span",{staticClass:"goods-buy__price"},[t._v("￥"+t._s(t.item.count))]),t._v(" "),s("span",{staticClass:"cap-express__fee"},[t._v("（含运费￥"+t._s(t.item.freight)+"）")])])]),t._v(" "),t._e()])]):s("div",t._l(t.item.goodsList,function(e,a){return s("div",{key:a},[s("div",{staticClass:"van-cell goods-thumb__list"},[s("div",{staticClass:"van-cell__title"},t._l(t.item.goodsList,function(e,a){return s("span",{key:a,staticClass:"goods-thumb-item"},[e.image&&a<3?s("img",{staticClass:"n-img",attrs:{src:e.image,mode:"aspectFill"}}):a<3?s("img",{staticClass:"n-img",attrs:{src:"http://www.qckj.link/upload/goods/20180520/1526794348353_160563.jpg"}}):t._e()])}))]),t._v(" "),s("div",{staticClass:"van-cell"},[s("div",{staticClass:"van-cell__title"},[s("span",{staticClass:"goods-buy__info"},[t._v("共"),s("span",{staticClass:"goods-buy__num"},[t._v(t._s(t.item.goodsListSize))]),t._v("个款  "),s("span",{staticClass:"goods-buy__num"},[t._v(t._s(e.countNum))]),t._v("件商品  ")])]),t._v(" "),s("div",{staticClass:"van-cell__value"},[s("span",{staticClass:"goods-buy__total"},[t._v("合计:")]),t._v(" "),s("span",{staticClass:"goods-buy__price"},[t._v("￥"+t._s(t.item.count))]),t._v(" "),t.item.expressWay>0?s("span",{staticClass:"cap-express__fee"},[t._v("（含运费￥"+t._s(t.item.expressWay)+"）")]):t._e()])]),t._v(" "),5===t.item.state&&t.item.isHasChildren?s("table",{staticClass:"skuCode"},[s("tr",[s("th",[t._v("颜色")]),t._v(" "),s("th",[t._v("码数")]),t._v(" "),s("th",[t._v("总件数")]),t._v(" "),s("th",[t._v("已发")]),t._v(" "),s("th",[t._v("未发")])],1),t._v(" "),t._l(t.skuCodeList[a],function(e,a){return s("tr",{key:a},t._l(e,function(e,a){return s("td",{key:a},[t._v(t._s(e))])}))})],2):t._e()],1)})),t._v(" "),s("div",{staticClass:"below"},[t._l(t.item.children,function(e,a){return s("div",{key:a,staticClass:"van-cell van-hairline",attrs:{eventid:"1-"+a},on:{click:function(s){t.bxq(e.id,e.state)}}},[s("div",{staticClass:"van-cell__title"},[s("span",[t._v("子订单编号("+t._s(t.stateName[e.state])+"): "+t._s(e.orderNo))])]),t._v(" "),s("i",{staticClass:"van-icon van-icon-arrow van-cell__right-icon"})],1)}),t._v(" "),s("div",{staticClass:"below__bottom van-cell van-hairline"},[1===t.item.state?s("div",{staticClass:"van-cell__value"},[s("div",{staticClass:"btn__cell"},[s("span",{staticClass:"below__btn",attrs:{eventid:"2"},on:{click:function(e){t.handleOrderConfirmClick({id:t.item.id,type:"cancel"})}}},[t._v("取消订单")])]),t._v(" "),s("div",{staticClass:"btn__cell"},[s("span",{staticClass:"below__btn",attrs:{eventid:"3"},on:{click:function(e){t.bxq(t.item.id,t.item.state)}}},[t._v("查看详情")])]),t._v(" "),s("div",{staticClass:"btn__cell"},[s("span",{staticClass:"below__btn below__btn--primary",attrs:{eventid:"4"},on:{click:function(e){t.bxq(t.item.id,t.item.state)}}},[t._v("确认付款")])])]):t._e(),t._v(" "),2===t.item.state||7===t.item.state?s("div",{staticClass:"van-cell__value"},[s("div",{staticClass:"btn__cell"},[s("span",{staticClass:"below__btn below__btn--primary",attrs:{eventid:"5"},on:{click:function(e){t.bxq(t.item.id,t.item.state)}}},[t._v("查看详情")])]),t._v(" "),s("div",{staticClass:"btn__cell"},[s("span",{staticClass:"below__btn",attrs:{eventid:"6"},on:{click:function(e){t.handleOrderConfirmClick({id:t.item.id,type:"delete"})}}},[t._v("删除订单")])])]):t._e(),t._v(" "),5===t.item.state?s("div",{staticClass:"van-cell__value"},[s("div",{staticClass:"btn__cell"},[t.item.isHasChildren?t._e():s("span",{staticClass:"below__btn",attrs:{eventid:"7"},on:{click:function(e){t.afterSale(t.item.id,t.item.paid,t.item.freight,0)}}},[t._v("退款")])]),t._v(" "),s("div",{staticClass:"btn__cell"},[s("span",{staticClass:"below__btn below__btn--primary",attrs:{eventid:"8"},on:{click:function(e){t.bxq(t.item.id,t.item.state)}}},[t._v("查看详情")])])]):t._e(),t._v(" "),6===t.item.state?s("div",{staticClass:"van-cell__value"},[s("div",{staticClass:"btn__cell"},[s("span",{staticClass:"below__btn",attrs:{eventid:"9"},on:{click:function(e){t.bxq(t.item.id,t.item.state)}}},[t._v("查看详情")])]),t._v(" "),t.item.isHasChildren?t._e():s("div",{staticClass:"btn__cell"},[s("span",{staticClass:"below__btn",attrs:{eventid:"10"},on:{click:function(e){t.afterSale(t.item.id,t.item.paid,t.item.freight,1)}}},[t._v("申请售后")])]),t._v(" "),t.item.isHasChildren?t._e():s("div",{staticClass:"btn__cell"},[s("span",{staticClass:"below__btn",attrs:{eventid:"11"},on:{click:function(e){t.logistics(t.item.id)}}},[t._v("查看物流")])]),t._v(" "),t.item.isHasChildren?t._e():s("div",{staticClass:"btn__cell"},[s("span",{staticClass:"below__btn below__btn--primary",attrs:{eventid:"12"},on:{click:function(e){t.sureOrder(t.item.id)}}},[t._v("确认收货")])])]):t._e()])],2)])},staticRenderFns:[]};e.a=a},zB5p:function(t,e){}},["oQwd"]);